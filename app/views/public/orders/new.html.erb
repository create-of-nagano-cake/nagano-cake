<%= render "public/sessions/header" %>

<h3>注文情報入力</h3>

<div>
  <%= form_with model: @order, url: orders_confirm_path do |f| %>
  
   <% if @order.errors.any? %>
     <h3><%= pluralize(@order.errors.count, "error") %> prohibited this obj from being saved:</h3>
     <ul>
     <% @order.errors.full_messages.each do |message| %>
      <li><%= message %></li>
     <% end %> 
     </ul>
   <% end %>
  
   <div>
    <h3>支払方法</h3>
    <%= f.radio_button :payment_method, Order.payment_methods.key(0) %>
    <%= f.label :payment_method, Order.payment_methods_i18n[:credit_card] %>
    <%= f.radio_button :payment_method, Order.payment_methods.key(1)  %>
    <%= f.label :payment_method, Order.payment_methods_i18n[:transfer] %>
   </div>
   
   <div>
    <h3>お届け先</h3> 
    <%= f.radio_button :select_address, "0" %>
    <%= f.label :address_id, "ご自身の住所" %>
     <p>〒<%= @customer.postal_code %> <%= @customer.address %></p>
    <p><%= @customer.last_name %> <%= @customer.first_name %></p>
   </div>
   
   <div>
    <%= f.radio_button :select_address, "1" %>
    <%= f.label :address_id, "登録済住所から選択" %>
    <p><%= f.select :address_id, options_from_collection_for_select(Address.all, :id, :address_display) %></p>
   </div>
   
   <div>
    <%= f.radio_button :select_address, "2" %>
    <%= f.label :address_id, "新しいお届け先" %>
    <p>郵便番号(ハイフンなし)<%= f.text_field :postal_code %></p>
    <p>住所<%= f.text_field :address %></p>
    <p>宛名<%= f.text_field :name %></p>
   </div>
   
   
    <%= f.submit "確認画面へ進む" %>
  <% end %> 
</div>