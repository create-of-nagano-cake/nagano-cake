<%= render "public/sessions/header" %>

<div>
  <h3>配送先登録/一覧</h3>
  
  <%= form_with model: @address, url: addresses_path, method: :post do |f| %>
   <div>郵便番号（ハイフンなし） <%= f.text_field :postal_code %></div>
   <div>住所 <%= f.text_field :address %></div>
   <div>宛名 <%= f.text_field :name %> <%= f.submit "新規登録" %></div>
  <% end %> 
</div>

    <% if @address.errors.any? %>
     <h3><%= pluralize(@address.errors.count, "error") %> prohibited this obj from being saved:</h3>
     <ul>
     <% @address.errors.full_messages.each do |message| %>
      <li><%= message %></li>
     <% end %> 
     </ul>
    <% end %>

<table>
 <thead>
  <tr>
   <th>郵便番号</th>
   <th>住所</th>
   <th>宛名</th>
   <th></th>
   <th colspan="4"></th>
   </tr>
 </thead>

 <tbody>
  <% @addresses.each do |address| %>
   <tr>
    <td><%= address.postal_code %></td>
    <td><%= address.address %></td>
    <td><%= address.name %></td>
    <td>
     <%= link_to "編集する", edit_address_path(address.id) %>
     <%= link_to "削除する", address_path(address.id), method: :delete, "data-confirm" => "本当に削除しますか？" %>
    </td>
   </tr> 
  <% end %> 
 </tbody>
</table> 