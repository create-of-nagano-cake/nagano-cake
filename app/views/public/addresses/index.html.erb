<%= render "public/sessions/header" %>

<div class='container'>
 <div class='row'>
  <div class='col-8 offset-1'>
   <div class='row'>
    <div class='col mt-4 mb-4'>
     
     <div class="bg-secondary">
      <h3>配送先登録/一覧</h3>
     </div> 
     
     <%= form_with model: @address, url: addresses_path, method: :post do |f| %>
      <% if @address.errors.any? %>
       <h3><%= pluralize(@address.errors.count, "error") %> prohibited this obj from being saved:</h3>
       <ul>
        <% @address.errors.full_messages.each do |message| %>
         <li><%= message %></li>
        <% end %> 
       </ul>
      <% end %>
      
      <div>
       <label class="col-4 offset-1">郵便番号（ハイフンなし）</label>
       <%= f.text_field :postal_code %>
      </div>
      
      <div>
       <label class="col-4 offset-1">住所</label>
       <%= f.text_field :address %>
      </div>
      
      <div>
       <label class="col-4 offset-1">宛名</label>
       <%= f.text_field :name %> <%= f.submit "新規登録", class: "btn btn-success" %>
      </div>
     <% end %> 

     </div>
    </div> 
   </div>  
  </div>   

  <div class="row">
   <div class="col-6 offset-1">
    <div class='row'>
     <div class='col mt-4 mb-4'>
    
      <table class="table">
       <thead>
        <tr>
         <th>郵便番号</th>
         <th>住所</th>
         <th>宛名</th>
         <th></th>
         <th colspan="4"></th>
         </tr>
       </thead>
      
       <tbody>
        <% @addresses.each do |address| %>
         <tr>
          <td><%= address.postal_code %></td>
          <td><%= address.address %></td>
          <td><%= address.name %></td>
          <td>
           <%= link_to "編集する", edit_address_path(address.id), class: "btn btn-success" %>
           <%= link_to "削除する", address_path(address.id), method: :delete, "data-confirm" => "本当に削除しますか？", class: "btn btn-danger" %>
          </td>
         </tr> 
        <% end %> 
       </tbody>
      </table>
      
     </div>
    </div>
   </div>
  </div> 
 </div>
</div> 